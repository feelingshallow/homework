<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <style type="text/css">
        * {
            margin: 0;
        }

        .big {
            width: 600px;
            height: 500px;
            background-color: #000;
            margin: 50px auto;
            position: relative;
            border: 30px solid red;
        }

        .small {
            width: 100px;
            height: 100px;
            background-color: #ff0;
            position: absolute;
        }
    </style>
</head>
<body>
<div class="big">
    <div class="small"></div>
</div>
<script type="text/javascript">
    window.onload = function () {
// 获取元素
        var bigBox = document.querySelector(".big");
        var sBox = document.querySelector(".small");
// 获取大盒子的大小
        var bigbox_w = bigBox.offsetWidth;
        var bigbox_h = bigBox.offsetHeight;
// 获取小盒子的大小
        var sbox_w = sBox.offsetWidth;
        var sbox_h = sBox.offsetHeight;
// 获取大盒子的间距
        var bigBox_l = bigBox.offsetLeft;
        var bigBox_t = bigBox.offsetTop;
// 小盒子鼠标按下才触发事件
        sBox.onmousedown = function (ev) {
            ev = ev || window.event;
// 获取鼠标在盒子中的位置
            var disX = ev.pageX - sBox.offsetLeft;
            var disY = ev.pageY - sBox.offsetTop;
            console.log(disX, disY)
// 鼠标在文档中移动
            document.onmousemove = function (e) {
                e = e || window.event;
                var moveX = e.pageX - disX;
                var moveY = e.pageY - disY;
                if (moveX < 0) {
                    moveX = 0;
                }
                if (moveY < 0) {
                    moveY = 0;
                }
                if (moveX > bigbox_w - sbox_w) {
                    moveX = bigbox_w - sbox_w;
                }
                if (moveY > bigbox_h - sbox_h) {
                    moveY = bigbox_h - sbox_h;
                }
                sBox.style.left = moveX + 'px';
                sBox.style.top = moveY + 'px';
            }
        }
        document.onmouseup = function () {
            document.onmousemove = null;
        }
    }
</script>
</body>
</html>